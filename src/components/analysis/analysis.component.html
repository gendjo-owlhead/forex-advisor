
@if (isLoading()) {
  <div class="flex flex-col items-center justify-center h-full text-center text-gray-400">
    <div class="w-12 h-12 border-4 border-sky-500 border-t-transparent rounded-full animate-spin mb-4"></div>
    <p class="text-lg font-semibold">Generating AI Analysis...</p>
    <p>Please wait while our model processes the market data.</p>
  </div>
} @else if (error()) {
  <div class="flex items-center justify-center h-full text-center text-red-400 bg-red-900/20 p-4 rounded-lg">
    <div>
        <h3 class="font-bold text-lg">Analysis Failed</h3>
        <p>{{ error() }}</p>
    </div>
  </div>
} @else if (analysis(); as result) {
  <div class="space-y-6 animate-fade-in">
    <div class="flex flex-wrap items-baseline gap-x-4">
      <h3 class="text-xl font-bold" [class]="result.prediction === 'Bullish' ? 'text-green-400' : result.prediction === 'Bearish' ? 'text-red-400' : 'text-yellow-400'">
        {{ result.prediction }}
      </h3>
      <p class="text-sm text-gray-400">
        Confidence: <span class="font-semibold" [class]="getConfidenceColor(result.confidence)">{{ result.confidence }}</span>
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Upward Signal -->
      <div class="bg-green-900/30 border border-green-500/50 p-4 rounded-lg">
        <h4 class="font-semibold text-lg text-green-300 mb-2 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clip-rule="evenodd" /></svg>
          Upward Signal (Bullish)
        </h4>
        <p class="text-gray-300 text-sm">{{ result.upwardSignal }}</p>
      </div>

      <!-- Downward Signal -->
      <div class="bg-red-900/30 border border-red-500/50 p-4 rounded-lg">
        <h4 class="font-semibold text-lg text-red-300 mb-2 flex items-center">
         <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-.707-4.293l3-3a1 1 0 00-1.414-1.414L10 10.586 8.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0z" clip-rule="evenodd" transform="rotate(180 10 10)"/></svg>
          Downward Signal (Bearish)
        </h4>
        <p class="text-gray-300 text-sm">{{ result.downwardSignal }}</p>
      </div>
    </div>
    
    <div class="mt-6 text-xs text-gray-500 italic">
      <p><strong>Disclaimer:</strong> {{ result.disclaimer }}</p>
    </div>

  </div>
} @else {
  <div class="flex items-center justify-center h-full text-center text-gray-500">
    <p>Select a currency pair and click 'Analyze' to see AI-powered signals.</p>
  </div>
}

<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fade-in 0.5s ease-out forwards;
  }
</style>
